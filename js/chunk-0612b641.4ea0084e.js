(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0612b641"],{"38ad":function(t,a,e){},4944:function(t,a,e){"use strict";e.r(a);var o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"SafeCenter"},[e("div",{staticClass:"SafeCenter-nav"},[e("van-nav-bar",{attrs:{title:"安全中心","left-text":"返回","left-arrow":""},on:{"click-left":t.Goback}})],1),e("div",{staticClass:"SafeCenter-nav"},[e("div",{staticClass:"list-box"},[e("van-cell-group",[e("van-cell",{attrs:{title:"修改密码","is-link":""},on:{click:t.changePas}}),e("van-cell",{attrs:{title:"注销账号","is-link":""},on:{click:t.destroy}}),e("van-cell",{attrs:{title:"退出登录","is-link":""},on:{click:t.LoginOut}})],1)],1),e("van-popup",{attrs:{position:"bottom"},model:{value:t.isOpen,callback:function(a){t.isOpen=a},expression:"isOpen"}},[e("div",{staticClass:"v-popup",staticStyle:{padding:"20px"}},[e("van-form",{on:{submit:t.commit}},[e("van-field",{attrs:{label:"旧密码",placeholder:"旧密码"},model:{value:t.passwordData.oldPassword,callback:function(a){t.$set(t.passwordData,"oldPassword",a)},expression:"passwordData.oldPassword"}}),e("van-field",{attrs:{type:"text",label:"新密码",placeholder:"新密码"},model:{value:t.passwordData.password,callback:function(a){t.$set(t.passwordData,"password",a)},expression:"passwordData.password"}}),e("div",{staticClass:"btn-box",staticStyle:{"margin-top":"20px"}},[e("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"}},[t._v("提交")])],1)],1)],1)])],1)])},s=[],n=(e("38ad"),e("e3a8")),i={name:"SafeCenter",data:function(){return{isOpen:!1,passwordData:{oldPassword:"",password:""}}},created:function(){var t=this;localStorage.getItem("__Tk")||this.$toast.fail({message:"还没有登录\n正在跳转至登录页面",forbidClick:!0,duration:1200,onClose:function(){t.$router.push({name:"Login"})}})},methods:{Goback:function(){this.$router.go(-1)},LoginOut:function(){localStorage.removeItem("__Tk"),this.$router.push({name:"Login"})},changePas:function(){this.isOpen=!0},commit:function(){var t=this;if(n["a"].ValidFormFn(this.passwordData)){var a=localStorage.getItem("__Tk");this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"POST",url:"/updatePassword",data:{appkey:this.appkey,tokenString:a,password:this.passwordData.password,oldPassword:this.passwordData.oldPassword}}).then((function(a){t.$toast.clear(),t.isOpen=!1,"E001"==a.data.code?(localStorage.removeItem("__Tk"),t.$router.push({name:"Login"})):t.$toast(a.data.msg)})).catch((function(a){t.$toast.clear()}))}},destroy:function(){var t=this;this.$dialog.confirm({title:"注销账号",message:"一旦注销，数据无法恢复"}).then((function(){var a=localStorage.getItem("__Tk");t.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),t.axios({method:"POST",url:"/destroyAccount",data:{appkey:t.appkey,tokenString:a}}).then((function(a){t.$toast.clear(),"G001"==a.data.code?(localStorage.removeItem("__Tk"),t.$router.push({name:"Login"})):(t.$toast(a.data.msg),t.$toast.fail({message:a.data.msg,forbidClick:!0,duration:1200}))})).catch((function(a){t.$toast.clear()}))})).catch((function(t){}))}}},r=i,l=e("2877"),c=Object(l["a"])(r,o,s,!1,null,null,null);a["default"]=c.exports},e3a8:function(t,a,e){"use strict";e("e7e5");var o=e("d399");function s(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}function n(t,a){for(var e=0;e<a.length;e++){var o=a[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function i(t,a,e){return a&&n(t.prototype,a),e&&n(t,e),t}var r=function(){function t(){s(this,t),this.validFromObj={nickName:{reg:/^[\u4e00-\u9fa5\w]{1,10}$/,msg:"用户名格式不正确"},phone:{reg:/^1[3-9]\d{9}$/,msg:"手机号格式不正确"},password:{reg:/^[a-zA-Z]\w{5,15}$/,msg:"密码格式不正确"},oldPassword:{reg:/^[a-zA-Z]\w{5,15}$/,msg:"密码格式不正确"},email:{reg:/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,msg:"邮箱格式不正确"},code:{reg:/^\d{6}$/,msg:"验证格式正确"}}}return i(t,[{key:"ValidFormFn",value:function(t){for(var a in t)if(!this.validFromObj[a].reg.test(t[a]))return Object(o["a"])(this.validFromObj[a].msg),!1;return!0}}]),t}();a["a"]=new r}}]);
//# sourceMappingURL=chunk-0612b641.4ea0084e.js.map