(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2f5b1454"],{1276:function(t,s,e){"use strict";var i=e("d784"),a=e("44e7"),r=e("825a"),n=e("1d80"),o=e("4840"),c=e("8aa5"),d=e("50c4"),l=e("14c3"),u=e("9263"),h=e("d039"),f=[].push,p=Math.min,g=4294967295,m=!h((function(){return!RegExp(g,"y")}));i("split",2,(function(t,s,e){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,e){var i=String(n(this)),r=void 0===e?g:e>>>0;if(0===r)return[];if(void 0===t)return[i];if(!a(t))return s.call(i,t,r);var o,c,d,l=[],h=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),p=0,m=new RegExp(t.source,h+"g");while(o=u.call(m,i)){if(c=m.lastIndex,c>p&&(l.push(i.slice(p,o.index)),o.length>1&&o.index<i.length&&f.apply(l,o.slice(1)),d=o[0].length,p=c,l.length>=r))break;m.lastIndex===o.index&&m.lastIndex++}return p===i.length?!d&&m.test("")||l.push(""):l.push(i.slice(p)),l.length>r?l.slice(0,r):l}:"0".split(void 0,0).length?function(t,e){return void 0===t&&0===e?[]:s.call(this,t,e)}:s,[function(s,e){var a=n(this),r=void 0==s?void 0:s[t];return void 0!==r?r.call(s,a,e):i.call(String(a),s,e)},function(t,a){var n=e(i,t,this,a,i!==s);if(n.done)return n.value;var u=r(t),h=String(this),f=o(u,RegExp),v=u.unicode,b=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(m?"y":"g"),C=new f(m?u:"^(?:"+u.source+")",b),y=void 0===a?g:a>>>0;if(0===y)return[];if(0===h.length)return null===l(C,h)?[h]:[];var S=0,k=0,A=[];while(k<h.length){C.lastIndex=m?k:0;var L,x=l(C,m?h:h.slice(k));if(null===x||(L=p(d(C.lastIndex+(m?0:k)),h.length))===S)k=c(h,k,v);else{if(A.push(h.slice(S,k)),A.length===y)return A;for(var $=1;$<=x.length-1;$++)if(A.push(x[$]),A.length===y)return A;k=S=L}}return A.push(h.slice(S)),A}]}),!m)},"159b":function(t,s,e){var i=e("da84"),a=e("fdbc"),r=e("17c2"),n=e("9112");for(var o in a){var c=i[o],d=c&&c.prototype;if(d&&d.forEach!==r)try{n(d,"forEach",r)}catch(l){d.forEach=r}}},"17c2":function(t,s,e){"use strict";var i=e("b727").forEach,a=e("a640"),r=e("ae40"),n=a("forEach"),o=r("forEach");t.exports=n&&o?[].forEach:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}},4160:function(t,s,e){"use strict";var i=e("23e7"),a=e("17c2");i({target:"Array",proto:!0,forced:[].forEach!=a},{forEach:a})},7331:function(t,s,e){},"76a1":function(t,s,e){"use strict";e.r(s);var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"Pay"},[e("div",{staticClass:"pay-nav"},[e("van-nav-bar",{attrs:{title:"提交订单","left-text":"返回","left-arrow":""},on:{"click-left":t.Goback}})],1),e("div",{staticClass:"paybody"},[e("div",{staticClass:"chooseAddress clearfix",on:{click:function(s){return t.ChooseAddress()}}},[""==t.aid?e("div",{staticClass:"chooseAddress-text",staticStyle:{"line-height":"44px"}},[e("p",{staticClass:"chooseAddress-text-a"},[t._v("请选择地址")])]):e("div",{staticClass:"chooseAddress-text"},[e("p",{staticClass:"chooseAddress-text-a"},[e("span",{staticStyle:{"margin-right":"8px"}},[t._v(t._s(t.AddressChosen.name)+" ")]),t._v(" "),e("span",[t._v(t._s(t.AddressChosen.tel))])]),e("p",{staticClass:"chooseAddress-text-a chooseAddress-text-b"},[t._v(t._s(t.AddressChosen.address))])]),e("div",{staticClass:"chooseAddress-right"},[e("van-icon",{attrs:{name:"arrow"}})],1)]),e("div",{staticClass:"pay-list"},[e("div",{staticClass:"order-item"},[t._l(t.buyingData,(function(s,i){return e("div",{key:i,staticClass:"order-item-body"},[e("van-card",{attrs:{num:s.count,price:s.price,desc:s.enname,title:s.name,thumb:s.small_img},scopedSlots:t._u([{key:"tags",fn:function(){return[e("span",{staticClass:"product-type"},[t._v(t._s(s.rule))])]},proxy:!0}],null,!0)})],1)})),e("div",{staticClass:"order-item-end clearfix"},[e("span",{staticClass:"total-money fr"},[t._v("¥"+t._s(t.totalPrice))]),e("span",{staticClass:"total-products fr"},[t._v("总计"+t._s(t.totalNum)+"件商品 合计")])])],2)]),e("van-submit-bar",{attrs:{price:100*t.totalPrice,"button-text":"提交订单",disabled:0==t.totalNum},on:{submit:t.commit}})],1)])},a=[],r=(e("4160"),e("b0c0"),e("ac1f"),e("1276"),e("159b"),e("7331"),{name:"Pay",data:function(){return{aid:"",chosenAddressId:"",sids:[],AddressList:[],AddressChosen:"",buyingData:[],totalNum:0,totalPrice:0}},created:function(){var t=this;this.SearchAddress(),this.SearchPuying(),localStorage.getItem("__Tk")||this.$toast.fail({message:"还没有登录\n正在跳转至登录页面",forbidClick:!0,duration:1e3,onClose:function(){t.$router.push({name:"Login"})}})},methods:{Goback:function(){this.$router.go(-1)},ChooseAddress:function(){this.$router.push({name:"MyAddress",params:{choose:"ChooseAddress",sids:this.$route.params.sids}})},SearchAddress:function(){var t=this,s=localStorage.getItem("__Tk");this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"GET",url:"/findAddress",params:{appkey:this.appkey,tokenString:s}}).then((function(s){if(t.$toast.clear(),2e4==s.data.code){s.data.result.forEach((function(s){var e={id:s.aid,name:s.name,tel:s.tel,address:s.province+s.city+s.county+s.addressDetail,isDefault:Boolean(s.isDefault)};s.isDefault&&(t.chosenAddressId=s.aid,t.aid=s.aid),t.AddressList.push(e)})),t.$route.params.aid?t.aid=t.$route.params.aid:t.aid=t.chosenAddressId;for(var e=0;e<t.AddressList.length;e++)if(t.AddressList[e].id==t.aid){t.AddressChosen=t.AddressList[e];break}}else t.$toast.fail({message:"查询失败\n请先登录",forbidClick:!0,duration:2200}),t.$router.push({name:"Login"})})).catch((function(s){t.$toast.clear(),t.$toast.fail({message:"查询失败\n"+s,forbidClick:!0,duration:2200})}))},SearchPuying:function(){var t=this,s=localStorage.getItem("__Tk");/\-/.test(this.$route.params.sids)?this.sids=this.$route.params.sids.split("-"):this.sids[0]=this.$route.params.sids,this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"GET",url:"/commitShopcart",params:{appkey:this.appkey,sids:JSON.stringify(this.sids),tokenString:s}}).then((function(s){t.$toast.clear(),5e4==s.data.code?(t.buyingData=s.data.result,t.buyingData.forEach((function(s){t.totalNum+=s.count,t.totalPrice+=s.count*s.price}))):t.$toast.fail({message:"查询失败\n"+s.data.msg,forbidClick:!0,duration:2200})})).catch((function(s){t.$toast.clear(),t.$toast.fail({message:"查询失败\n"+s,forbidClick:!0,duration:2200})}))},commit:function(){var t=this;if(this.AddressChosen.address){var s=localStorage.getItem("__Tk"),e=this.AddressChosen;this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"POST",url:"/pay",data:{appkey:this.appkey,tokenString:s,sids:JSON.stringify(this.sids),phone:e.tel,address:e.address,receiver:e.name}}).then((function(s){t.$toast.clear(),6e4==s.data.code?t.$toast.success({message:s.data.msg+"\n正在跳转订单页面",forbidClick:!0,duration:1200,onClose:function(){t.$router.push({name:"Order"})}}):t.$toast.fail({message:"支付失败\n"+s.data.msg,forbidClick:!0,duration:2200})})).catch((function(s){t.$toast.clear(),t.$toast.fail({message:"失败\n"+s,forbidClick:!0,duration:2200})}))}else this.$toast("还没有选择地址")}}}),n=r,o=e("2877"),c=Object(o["a"])(n,i,a,!1,null,null,null);s["default"]=c.exports},a640:function(t,s,e){"use strict";var i=e("d039");t.exports=function(t,s){var e=[][t];return!!e&&i((function(){e.call(null,s||function(){throw 1},1)}))}},b0c0:function(t,s,e){var i=e("83ab"),a=e("9bf2").f,r=Function.prototype,n=r.toString,o=/^\s*function ([^ (]*)/,c="name";i&&!(c in r)&&a(r,c,{configurable:!0,get:function(){try{return n.call(this).match(o)[1]}catch(t){return""}}})},fdbc:function(t,s){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=chunk-2f5b1454.9ff1ef5a.js.map