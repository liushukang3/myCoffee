(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-45f40220"],{"159b":function(t,a,e){var s=e("da84"),i=e("fdbc"),r=e("17c2"),o=e("9112");for(var n in i){var c=s[n],d=c&&c.prototype;if(d&&d.forEach!==r)try{o(d,"forEach",r)}catch(l){d.forEach=r}}},"17c2":function(t,a,e){"use strict";var s=e("b727").forEach,i=e("a640"),r=e("ae40"),o=i("forEach"),n=r("forEach");t.exports=o&&n?[].forEach:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}},4160:function(t,a,e){"use strict";var s=e("23e7"),i=e("17c2");s({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},"62d5":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"Order"},[e("div",{staticClass:"Order-nav"},[e("van-tabs",{attrs:{sticky:"",swipeable:"",animated:"","title-active-color":"rgb(64, 187, 181)",color:"#1d807b8a"},on:{change:t.SelectTag},model:{value:t.navActive,callback:function(a){t.navActive=a},expression:"navActive"}},t._l(t.navData,(function(a,s){return e("van-tab",{key:s,attrs:{title:a.title,name:a.ind}},[e("div",{staticClass:"Order-body"},["{}"==JSON.stringify(t.orderData)?e("div",{staticClass:"cartEmpty"},[e("van-empty",{staticClass:"custom-image",attrs:{image:"https://img.yzcdn.cn/vant/custom-empty-image.png",description:"还没有订单,赶紧去逛一下吧~"}})],1):e("div",{staticClass:"haveOrder"},[t._l(t.orderData,(function(a,s){return e("div",{key:s,staticClass:"order-item"},[e("div",{staticClass:"order-item-start clearfix"},[e("div",{staticClass:"clearfix"},[e("span",{staticClass:"order-id fl"},[t._v(t._s(s))]),2==a[0].status?e("div",{staticClass:"order-tool fr"},[e("span",{staticClass:"order-style"},[t._v("已收货")]),e("span",{staticClass:"order-del",on:{click:function(e){return t.delOrder(a,s)}}},[t._v("删除")])]):e("div",{staticClass:"fr"},[e("span",{staticStyle:{color:"#333"},on:{click:function(e){return t.getProduct(a,s)}}},[t._v("确定收货")])])]),e("div",{staticClass:"chooseAddress-text"},[e("p",{staticClass:"chooseAddress-text-a"},[e("span",{staticStyle:{"margin-right":"8px"}},[t._v(t._s(a[0].receiver||"无名君"))]),t._v(" "),e("span",[t._v(t._s(a[0].phone||135e8))])]),e("p",{staticClass:"chooseAddress-text-a chooseAddress-text-b"},[t._v(t._s(a[0].address))])])]),t._l(a,(function(a,s){return e("div",{key:s,staticClass:"order-item-body"},[e("van-card",{attrs:{num:a.count,price:a.price,desc:a.enname,title:a.name,thumb:a.smallImg},scopedSlots:t._u([{key:"tags",fn:function(){return[e("span",{staticClass:"product-type"},[t._v(t._s(a.rule))])]},proxy:!0}],null,!0)})],1)})),e("div",{staticClass:"order-item-end clearfix"},[e("span",{staticClass:"order-time fl"},[t._v(t._s(t._f("formatDate")(a[0].createdAt,"yyyy-MM-dd hh:mm:ss")))]),e("span",{staticClass:"total-money fr"},[t._v("¥"+t._s(t.totalNumFn(a,"price")))]),e("span",{staticClass:"total-products fr"},[t._v("总计"+t._s(t.totalNumFn(a))+"件商品 合计")])])],2)})),e("div",{staticClass:"orderEnd"},[t._v("到底了...")])],2)])])})),1)],1)])},i=[],r=(e("4160"),e("c975"),e("159b"),e("ea0d"),{name:"Order",data:function(){return{navData:[{title:"全部订单",ind:0},{title:"待收货",ind:1},{title:"已收货",ind:2}],orderData:{},navActive:0,isReceive:!1,totalNum:0,totalPrice:0}},created:function(){this.SearchOrder()},methods:{Goback:function(){this.$router.go(-1)},SearchOrder:function(){var t=this;this.$toast.loading({message:"加载中",forbidClick:!0,duration:2200}),this.isReceive=!1;var a=localStorage.getItem("__Tk");this.axios({method:"GET",url:"/findOrder",params:{appkey:this.appkey,status:this.navActive,tokenString:a}}).then((function(a){if(t.$toast.clear(),7e4==a.data.code){t.$toast.success({message:a.data.msg,forbidClick:!0,duration:800,onClose:function(){t.isReceive=!0}}),a.data.result.sort((function(t,a){return new Date(a.createdAt).getTime()-new Date(t.createdAt).getTime()}));var e=[],s={};a.data.result.forEach((function(t){-1==e.indexOf(t.oid)?(e.push(t.oid),s[t.oid]=[],s[t.oid].push(t)):s[t.oid].push(t)})),t.orderData=s}else t.$toast.fail({message:a.data.msg,forbidClick:!0,duration:2200})})).catch((function(a){t.$toast.clear(),t.$toast.fail({message:"失败\n"+a,forbidClick:!0,duration:2200})}))},SelectTag:function(t){this.SearchOrder()},totalNumFn:function(t,a){var e=a||"num",s=0,i=0;return t.forEach((function(t){s+=t.count,i+=t.count*t.price})),"num"==e?s:i},getProduct:function(t,a){var e=this;if(this.isReceive){this.$toast.loading({message:"加载中",forbidClick:!0,duration:2200});var s=localStorage.getItem("__Tk");this.axios({method:"POST",url:"/receive",data:{appkey:this.appkey,tokenString:s,oid:a}}).then((function(t){e.$toast.clear(),8e4==t.data.code?(e.$toast.success({message:t.data.msg,forbidClick:!0,duration:2200}),e.orderData[a][0].status=2,1==e.navActive&&delete e.orderData[a]):(e.$toast.clear(),e.$toast.fail({message:t.data.msg,forbidClick:!0,duration:2200}))})).catch((function(t){e.$toast.clear(),e.$toast.fail({message:"失败\n"+t,forbidClick:!0,duration:2200})}))}},delOrder:function(t,a){var e=this,s=localStorage.getItem("__Tk");this.axios({method:"POST",url:"/removeOrder",data:{appkey:this.appkey,tokenString:s,oid:a}}).then((function(t){e.$toast.clear(),9e4==t.data.code?(e.$toast.success({message:t.data.msg,forbidClick:!0,duration:1200}),delete e.orderData[a],e.$forceUpdate()):(e.$toast.clear(),e.$toast.fail({message:t.data.msg,forbidClick:!0,duration:2200}))})).catch((function(t){e.$toast.clear(),e.$toast.fail({message:"失败\n"+t,forbidClick:!0,duration:2200})}))}}}),o=r,n=e("2877"),c=Object(n["a"])(o,s,i,!1,null,null,null);a["default"]=c.exports},a640:function(t,a,e){"use strict";var s=e("d039");t.exports=function(t,a){var e=[][t];return!!e&&s((function(){e.call(null,a||function(){throw 1},1)}))}},c975:function(t,a,e){"use strict";var s=e("23e7"),i=e("4d64").indexOf,r=e("a640"),o=e("ae40"),n=[].indexOf,c=!!n&&1/[1].indexOf(1,-0)<0,d=r("indexOf"),l=o("indexOf",{ACCESSORS:!0,1:0});s({target:"Array",proto:!0,forced:c||!d||!l},{indexOf:function(t){return c?n.apply(this,arguments)||0:i(this,t,arguments.length>1?arguments[1]:void 0)}})},ea0d:function(t,a,e){},fdbc:function(t,a){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=chunk-45f40220.9ca0ac30.js.map