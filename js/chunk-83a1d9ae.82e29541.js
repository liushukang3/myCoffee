(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-83a1d9ae"],{1276:function(t,i,a){"use strict";var e=a("d784"),n=a("44e7"),s=a("825a"),o=a("1d80"),r=a("4840"),c=a("8aa5"),l=a("50c4"),u=a("14c3"),d=a("9263"),h=a("d039"),p=[].push,f=Math.min,g=4294967295,v=!h((function(){return!RegExp(g,"y")}));e("split",2,(function(t,i,a){var e;return e="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,a){var e=String(o(this)),s=void 0===a?g:a>>>0;if(0===s)return[];if(void 0===t)return[e];if(!n(t))return i.call(e,t,s);var r,c,l,u=[],h=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),f=0,v=new RegExp(t.source,h+"g");while(r=d.call(v,e)){if(c=v.lastIndex,c>f&&(u.push(e.slice(f,r.index)),r.length>1&&r.index<e.length&&p.apply(u,r.slice(1)),l=r[0].length,f=c,u.length>=s))break;v.lastIndex===r.index&&v.lastIndex++}return f===e.length?!l&&v.test("")||u.push(""):u.push(e.slice(f)),u.length>s?u.slice(0,s):u}:"0".split(void 0,0).length?function(t,a){return void 0===t&&0===a?[]:i.call(this,t,a)}:i,[function(i,a){var n=o(this),s=void 0==i?void 0:i[t];return void 0!==s?s.call(i,n,a):e.call(String(n),i,a)},function(t,n){var o=a(e,t,this,n,e!==i);if(o.done)return o.value;var d=s(t),h=String(this),p=r(d,RegExp),k=d.unicode,m=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(v?"y":"g"),C=new p(v?d:"^(?:"+d.source+")",m),S=void 0===n?g:n>>>0;if(0===S)return[];if(0===h.length)return null===u(C,h)?[h]:[];var b=0,L=0,y=[];while(L<h.length){C.lastIndex=v?L:0;var x,_=u(C,v?h:h.slice(L));if(null===_||(x=f(l(C.lastIndex+(v?0:L)),h.length))===b)L=c(h,L,k);else{if(y.push(h.slice(b,L)),y.length===S)return y;for(var T=1;T<=_.length-1;T++)if(y.push(_[T]),y.length===S)return y;L=b=x}}return y.push(h.slice(b)),y}]}),!v)},"159b":function(t,i,a){var e=a("da84"),n=a("fdbc"),s=a("17c2"),o=a("9112");for(var r in n){var c=e[r],l=c&&c.prototype;if(l&&l.forEach!==s)try{o(l,"forEach",s)}catch(u){l.forEach=s}}},"17c2":function(t,i,a){"use strict";var e=a("b727").forEach,n=a("a640"),s=a("ae40"),o=n("forEach"),r=s("forEach");t.exports=o&&r?[].forEach:function(t){return e(this,t,arguments.length>1?arguments[1]:void 0)}},4160:function(t,i,a){"use strict";var e=a("23e7"),n=a("17c2");e({target:"Array",proto:!0,forced:[].forEach!=n},{forEach:n})},a15b:function(t,i,a){"use strict";var e=a("23e7"),n=a("44ad"),s=a("fc6a"),o=a("a640"),r=[].join,c=n!=Object,l=o("join",",");e({target:"Array",proto:!0,forced:c||!l},{join:function(t){return r.call(s(this),void 0===t?",":t)}})},a640:function(t,i,a){"use strict";var e=a("d039");t.exports=function(t,i){var a=[][t];return!!a&&e((function(){a.call(null,i||function(){throw 1},1)}))}},c84b:function(t,i,a){"use strict";a.r(i);var e=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"Detail"},[a("div",{staticClass:"detail-nav"},[a("van-nav-bar",{attrs:{title:"商品详情","left-text":"返回","left-arrow":""},on:{"click-left":t.Goback}})],1),a("div",{staticClass:"detail-bigbox"},[a("div",{staticClass:"detail-body"},[a("div",{staticClass:"detail-img"},[a("img",{attrs:{src:t.productData.large_img,alt:""}})]),a("div",{staticClass:"detail-body-box"},[a("div",{staticClass:"detail-title"},[a("div",{staticClass:"detail-title-box"},[a("div",{staticClass:"detail-title-Cn"},[t._v(t._s(t.productData.name))]),a("div",{staticClass:"detail-title-En"},[t._v(t._s(t.productData.enname))])]),a("div",{staticClass:"like"},[a("van-icon",{attrs:{name:t.isLike?"like":"like-o"},on:{click:t.LikeOrNotlike}})],1)]),a("div",{staticClass:"detail-choose"},[a("ul",t._l(t.productData.rules,(function(i,e){return a("li",{key:e,staticClass:"detail-choose-item"},[a("span",{staticClass:"detail-choose-item-title"},[t._v(t._s(i.title))]),t._l(i.arr,(function(e,n){return a("span",{key:n,class:["detail-choose-item-tag",e.isChoose?"activeTag":"unactiveTag"],on:{click:function(a){return t.ChooseTag(i.arr,e)}}},[t._v(t._s(e.tag))])}))],2)})),0)]),a("div",{staticClass:"detail-msg"},[a("div",{staticClass:"detail-msg-title"},[t._v("商品描述")]),t._l(t.productData.desc,(function(i,e){return a("p",{key:e},[t._v(t._s(i))])}))],2),a("div",{staticClass:"detail-price-box"},[a("span",{staticClass:"detail-price"},[t._v("¥"+t._s(t.productData.price))]),a("van-stepper",{attrs:{theme:"round","button-size":"22","disable-input":""},model:{value:t.value,callback:function(i){t.value=i},expression:"value"}})],1)])])]),a("div",{staticClass:"detail-bottom"},[a("van-goods-action",[a("van-goods-action-icon",{attrs:{icon:"cart-o",text:"购物车",badge:t.ShoppingcartCount},on:{click:t.GoShopcart}}),a("van-goods-action-button",{attrs:{color:"rgba(64, 187, 181,0.5)",type:"warning",text:"加入购物车"},on:{click:t.AddShopcart}}),a("van-goods-action-button",{attrs:{color:"rgb(64, 187, 181)",type:"danger",text:"立即购买"},on:{click:t.GoBuy}})],1)],1)])},n=[],s=(a("4160"),a("a15b"),a("ac1f"),a("1276"),a("159b"),a("d5ce"),{name:"Detail",data:function(){return{value:1,pid:"",productData:{},isLike:!1,ShoppingcartCount:0,cantClick:!0}},created:function(){this.pid=this.$route.query.pid,this.GetProductDetail(this.pid),this.SearchLike(this.pid),this.SearchShopcart(this.pid)},methods:{Goback:function(){this.$router.go(-1)},GetProductDetail:function(t){var i=this;this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"GET",url:"/productDetail",params:{appkey:this.appkey,pid:t}}).then((function(t){if(i.$toast.clear(),600==t.data.code){var a=t.data.result[0];a.desc=a.desc.split(/\n/);var e=["cream","milk","sugar","tem"],n=[];e.forEach((function(t){var i={};if(""!=a[t]){i.title=a[t+"_desc"],i.arr=[];var e=a[t].split("/");e.forEach((function(t,a){var e={tag:t,isChoose:0==a};i.arr.push(e)})),n.push(i)}})),a.rules=n,i.productData=a}})).catch((function(t){i.$toast.clear(),i.$toast.fail({message:"加载失败...\n"+t,forbidClick:!0,duration:1200})}))},SearchLike:function(t){var i=this,a=localStorage.getItem("__Tk");this.axios({method:"GET",url:"/findlike",params:{appkey:this.appkey,pid:t,tokenString:a}}).then((function(t){1e3==t.data.code?(i.isLike=t.data.result.length>0,i.cantClick=!1):(i.$toast.fail({message:"查询失败\n请先登录",forbidClick:!0,duration:2200}),i.cantClick=!0)})).catch((function(t){}))},LikeOrNotlike:function(){var t=this;if(this.cantClick)this.goLogin();else{var i=localStorage.getItem("__Tk"),a=this.isLike?"/notlike":"/like";this.axios({method:"POST",url:a,data:{appkey:this.appkey,pid:this.pid,tokenString:i}}).then((function(i){800!=i.data.code&&900!=i.data.code||(t.isLike=800==i.data.code,t.$toast(i.data.msg))})).catch((function(t){}))}},goLogin:function(){var t=this;this.$dialog.confirm({title:"请先登录",message:"你还没有登录,是否跳转至登录界面?"}).then((function(){t.$router.push({name:"Login"})})).catch((function(){}))},ChooseTag:function(t,i){if(!i.isChoose){for(var a=0;a<t.length;a++)t[a].isChoose=!1;i.isChoose=!0}},SearchShopcart:function(t){var i=this,a=localStorage.getItem("__Tk");this.axios({method:"GET",url:"/findAllShopcart",params:{appkey:this.appkey,tokenString:a}}).then((function(t){5e3==t.data.code&&(i.ShoppingcartCount=t.data.result.length)})).catch((function(t){}))},GoShopcart:function(){this.cantClick?this.goLogin():this.$router.push({name:"Shopcart"})},AddShopcart:function(t){var i=this;if(this.cantClick)this.goLogin();else{var a=localStorage.getItem("__Tk"),e=this.productData.rules,n=[];e.forEach((function(t){for(var i=0;i<t.arr.length;i++)if(t.arr[i].isChoose){n.push(t.arr[i].tag);break}})),this.axios({method:"POST",url:"/addShopcart",data:{appkey:this.appkey,pid:this.pid,tokenString:a,count:this.value,rule:n.join("/")}}).then((function(a){if(3e3==a.data.code){if(1==a.data.status&&i.ShoppingcartCount++,!0===t)return void setTimeout((function(){i.$router.push({name:"Pay",params:{sids:a.data.sid}})}),400);i.$toast(a.data.msg)}else i.$toast(a.data.msg)})).catch((function(t){}))}},GoBuy:function(){if(this.cantClick)this.goLogin();else{var t=!0;this.AddShopcart(t)}}}}),o=s,r=a("2877"),c=Object(r["a"])(o,e,n,!1,null,null,null);i["default"]=c.exports},d5ce:function(t,i,a){},fdbc:function(t,i){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=chunk-83a1d9ae.82e29541.js.map